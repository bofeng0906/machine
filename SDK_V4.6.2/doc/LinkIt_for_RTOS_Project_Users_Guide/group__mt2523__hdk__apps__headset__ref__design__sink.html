<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Example projects and demos: sink</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MediaTek.PNG"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Example projects and demos
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Project&#160;user's&#160;guide</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__mt2523__hdk__apps__headset__ref__design__sink.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">sink<div class="ingroups"><a class="el" href="group__mt2523__hdk.html">mt2523_hdk</a> &raquo; <a class="el" href="group__mt2523__hdk__apps.html">apps</a> &raquo; <a class="el" href="group__mt2523__hdk__apps__headset__ref__design.html">headset_ref_design</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<dl class="section user"><dt>Overview</dt><dd><ul>
<li>Feature description<ul>
<li>The Bluetooth Sink operates as a Bluetooth headset that supports Bluetooth Hands-Free, Advanced Audio Distribution and Audio/Video Remote Control Profiles.</li>
</ul>
</li>
<li>The sink feature provides:<ul>
<li>1. Connection management, such as manage Bluetooth EDR connection, auto-reconnect to a remote device after the Bluetooth is powered on or the Bluetooth link is lost.</li>
<li>2. Call management, such as answer or reject an incoming call, redial on the smartphone, hang up or hold an active call, swap duo SCO calls, switch audio path, handle the three way call.</li>
<li>3. Bluetooth music. Streaming music from an audio device, streaming control includes play or pause the music, move to previous or next track, Advanced Wireless Stereo (AWS) feature for high quality streaming between two headsets. For more details on AWS, please contact MediaTek customer support.</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Hardware and software environment</dt><dd><ul>
<li>Please refer to mt2523_hdkapps/headset_ref_design/readme.txt.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Directory contents</dt><dd><ul>
<li><b>src/sink/bt_sink_app_keypad.c</b>: Sink keypad file.</li>
<li><b>src/sink/bt_sink_app_cmd.c</b>: Sink command file.</li>
<li><b>src/sink/bt_sink_app_event.c</b>: Sink event file.</li>
<li><b>src/sink/bt_sink_app_main.c</b>: Sink main program file.</li>
<li><b>src/sink/bt_sink_app_config.c</b>: Sink action configuartion file.</li>
<li><b>inc/sink/bt_sink_app_keypad.h</b>: Sink keypad header file.</li>
<li><b>inc/sink/bt_sink_app_cmd.h</b>: Sink command header file.</li>
<li><b>inc/sink/bt_sink_app_event.h</b>: Sink event header file.</li>
<li><b>inc/sink/bt_sink_app_main.h</b>: Sink main program header file.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Run the feature</dt><dd><ul>
<li>Build and Download<ul>
<li>Please refer to mt2523_hdk/apps/headset_ref_design/readme.txt.</li>
</ul>
</li>
<li>Perpare two MT2523 HDKs and download, one is a master headset, the other is a slave headset.</li>
<li>Power on two MT2523 HDKs. Input AT command "AT+BTROLE=SET,Master\0d\0a" on the one of them to set the slave. Input AT command "AT+BTROLE=SET,Master\0d\0a" on the other to set the master. Reboot the master and slave.</li>
<li>Respectively double press the function key on both master and slave, waiting for the AWS connection established.</li>
<li>After the AWS connection established, double press the function key to make the master discoverable.</li>
<li>use smartphone to search, bond and connect to the master with the name "BT_Headset_xxxxxxxxxxxx", where xxxxxxxxxxxx is the master Bluetooth EDR address.</li>
<li>After connection is established with the smartphone, the following operations will be available. For more details on how to run, please contact MediaTek customer support. <div class="fragment"><div class="line">-------------------------------------------------------------------------------------------------------------------------------------------</div><div class="line">|                        |                                                    State                                                       |</div><div class="line">|                        |----------------------------------------------------------------------------------------------------------------|</div><div class="line">| Function Key Operation |Local music|    Not    |Connected  |Incoming |Outgoing |Active   | Held    |3-way         |Held and   |Bluetooth|</div><div class="line">|                        |playback   | Connected |           |call     |call     |call     | call    |incoming      |active call|music    |</div><div class="line">|                        |           |           |           |         |         |         |         |              |           |playback |</div><div class="line">|------------------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |           |Play       |         |         |         |         |Hold Active   |Swap active|         |</div><div class="line">|        |  Short press  |   Pause   |           |Bluetooth  | Answer  |         |Hold     |Active   |and accept    |and hlod   | Pause   |</div><div class="line">|        |               |           |           |music      |         |         |         |         |<span class="keyword">new</span> incoming  |           |         |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |           |           |         |         |Volume   |         |Hung up Active|           |         |</div><div class="line">|        |  Double press | Volume up |Pairing    |Pairing    |         |         |up       |         |and accept    | Volume up |Volume up|</div><div class="line">|        |               |           |           |           |         |         |         |         |<span class="keyword">new</span> incoming  |           |         |</div><div class="line">| Master |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |Reset the  |Redial the |         |         |Switch   |         |              |Switch     |         |</div><div class="line">|        | Triple press  |           |paired     |last dialed|         |         |audio    |         |              |audio      |         |</div><div class="line">|        |               |           |list       |number     |         |         |paths    |         |              |path       |         |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |  Long press   |Next track |           |Redial the | Reject  |Hang up  |Hang up  |Hang up  |Reject <span class="keyword">new</span>    |Hung up    |Next     |</div><div class="line">|        |               |           |           |missed call|         |         |         |         |incoming      |Active     |track    |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |Very <span class="keywordtype">long</span> press| Power off |Power off  | Power off |Power off|Power off|Power off|Power off|  Power off   | Power off |Power off|</div><div class="line">-------------------------------------------------------------------------------------------------------------------------------------------</div></div><!-- fragment --></li>
</ul>
</dd></dl>
<div class="fragment"><div class="line">-------------------------------------------------------------------------------------------------------------------------------------------</div><div class="line">|                        |                                                    State                                                       |</div><div class="line">|                        |----------------------------------------------------------------------------------------------------------------|</div><div class="line">| Function Key Operation |Local music|    Not    |Connected  |Incoming |Outgoing |Active   | Held    |3-way         |Held and   |Bluetooth|</div><div class="line">|                        |playback   | Connected |           |call     |call     |call     | call    |incoming      |active call|music    |</div><div class="line">|                        |           |           |           |         |         |         |         |              |           |playback |</div><div class="line">|------------------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |Play       |Play       |         |         |         |         |Hold Active   |Swap active|         |</div><div class="line">|        |  Short press  |   Pause   |local      |Bluetooth  | Answer  |         |Hold     |Active   |and accept    |and hlod   | Pause   |</div><div class="line">|        |               |           |music      |music      |         |         |         |         |<span class="keyword">new</span> incoming  |           |         |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |           |           |         |         |Volume   |         |Hung up Active|           |Volume   |</div><div class="line">|        | Double press  |Volume down|Pairing    |           |         |         |down     |         |and accept    |Volume down|down     |</div><div class="line">|        |               |           |           |           |         |         |         |         |<span class="keyword">new</span> incoming  |           |         |</div><div class="line">| Slave  |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |               |           |Reset the  |Redial the |         |         |Switch   |         |              |Switch     |         |</div><div class="line">|        | Triple press  |           |paired     |last dialed|         |         |audio    |         |              |audio      |         |</div><div class="line">|        |               |           |list       |number     |         |         |paths    |         |              |path       |         |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |  Long press   |Previous   |           |Redial the | Reject  |Hang up  |Hang up  |Hang up  |Reject <span class="keyword">new</span>    |Hung up    |Previous |</div><div class="line">|        |               |track      |           |missed call|         |         |         |         |incoming      |Active     |track    |</div><div class="line">|        |---------------|-----------|-----------|-----------|---------|---------|---------|---------|--------------|-----------|---------|</div><div class="line">|        |Very <span class="keywordtype">long</span> press| Power off |Power off  | Power off |Power off|Power off|Power off|Power off|  Power off   | Power off |Power off|</div><div class="line">-------------------------------------------------------------------------------------------------------------------------------------------</div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Dec 21 2017 10:19:10 for Example projects and demos by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
